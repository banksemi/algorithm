https://school.programmers.co.kr/learn/courses/30/lessons/42627



우선순위 큐 활용 사례 문제 자체는 우선순위 큐를 알고 있다면 큰 문제는 없다. 다만 데이터(Job)에 있는 값들이 많다보니 dataclass를 쓴게 가독성은 좋은 것 같다.



queue 라이브러리의 PriorityQueue 기억하자!

put이랑 get으로 쓰고 읽는다. 특히 get은 데이터가 없을 때 blocking된다. 주의하자.

우선순위 큐에 데이터를 넣을 때 순서를 직접 명시하고싶으면 (순서로 쓸 값, 데이터) 형태로 튜플을 넣자.



```

from queue import PriorityQueue

put, get

```





```

from queue import PriorityQueue

from dataclasses import dataclass

from math import floor

@dataclass

class job\_class:

&nbsp;   no: int

&nbsp;   start: int

&nbsp;   duration: int



scheduler = PriorityQueue()



def solution(jobs):

&nbsp;   n = len(jobs)

&nbsp;   jobs = \[job\_class(no=i, start=j\[0], duration=j\[1]) for i, j in enumerate(jobs)]

&nbsp;   jobs = sorted(jobs, key=lambda x: x.start)

&nbsp;   

&nbsp;   time = 0

&nbsp;   result = 0

&nbsp;   while True:

&nbsp;       # 하고있는 일이 없다면, 다음 첫번째 요청 시간까지 대기

&nbsp;       old\_time = time

&nbsp;       if scheduler.empty() and jobs:

&nbsp;           if time < jobs\[0].start:

&nbsp;               time = jobs\[0].start

&nbsp;       

&nbsp;       # 일단 현재 시간까지 있는 모든 잡을 다 넣기 (여러개 있을수 있고 과거도 있을 수 있음)

&nbsp;       while jobs:

&nbsp;           job = jobs\[0]

&nbsp;           print("time", time)

&nbsp;           if job.start <= time:

&nbsp;               # 작업의 소요시간이 짧은 것, 작업의 요청 시각이 빠른 것, 작업의 번호가 작은 것

&nbsp;               scheduler.put(((job.duration, job.start, job.no), job))

&nbsp;               print("추가함", job)

&nbsp;               jobs = jobs\[1:]

&nbsp;           else:

&nbsp;               break

&nbsp;       

&nbsp;       # 일 하나라도 하자.

&nbsp;       if not scheduler.empty():

&nbsp;           job = scheduler.get()\[1]

&nbsp;           print("일하기", job)

&nbsp;           time += job.duration

&nbsp;           print("현재 시간", time, "job 요청 시각")

&nbsp;           result += time - job.start # 완료된 시간 - 처음 요청된 시간

&nbsp;           print("증가", result)

&nbsp;       

&nbsp;       # 일 받은 것도 없고, 한 것도 없으면

&nbsp;       if old\_time == time:

&nbsp;           break

&nbsp;           

&nbsp;   return floor(result / n)

```


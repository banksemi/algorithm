https://school.programmers.co.kr/learn/courses/30/lessons/72416

트리 구조에서 힌트를 얻고 문제를 분할할 수 있는 방법을 찾아 시도했다.

구체적으로는, max_value라는 함수를 정의하여 그 팀 안에서 '팀장이 선택되었을 때', 혹은 '팀원 중 한명이 선택되었을 때' 2가지 케이스에 대한 최적의 값을 반환하도록 했다.

일단 탑다운 + 메모리제이션으로 풀었으나 복잡한 조건들이 많이 들어간 상태라서 코드를 개선할 수 있는 방법을 찾아야겠다.


```
"""
직원수 2 이상, 30만 이하 (각각 버는 금액 1만)


팀장을 줄때, 팀원 중 한명을 골랐을 때 최적의 값이 나와야함

무조건 팀장이거나 팀원이거나, 팀장팀장X, 팀원팀원X
- 팀원, 팀장+팀원, 팀장

def max_value(team_number) -> [팀장이갈때, 팀원이갈때]:
    -> 이 팀안에서는 최적의 해를 보장해야한다.
    -> 근데 팀장이 올때, 팀원이 올때가 될 수 있다.
    -> 팀장이 올때는, 그 팀장을 팀원 겸용으로 쓸 수 있다.
    

teams[팀장번호] = [팀원번호1, 팀원번호2]

"""

print = lambda *args, **kwargs: ...

def solution(sales, links):
    teams = {}
    for leader, member in links:
        if leader not in teams:
            teams[leader] = []
        teams[leader].append(member)
        
    def get_value(i):
        return sales[i-1]
    
    cache = {}
    def min_value(leader): # -> [팀장으로 갈때 최소화된 손실, 팀원으로 갈때 최소화된 손실]
        if leader in cache:
            return cache[leader]
        # 멤버가 없으면 리더 혼자 희생할 수 밖에 없음
        if leader not in teams:
            cache[leader] = (get_value(leader), 1e9)
            return cache[leader]
        
        
        sub_team_leaders = [i for i in teams[leader] if i in teams]
        
        # 팀장이 희생하지 않는 경우 -> 아래 팀원 중 하나 이상은 리더가 포함되어야함
        leader_value = 1e9
        for sub_leader in teams[leader]:
            _value = 0
            # sub_leader 가 희생하는 경우
            for member in teams[leader]:
                if sub_leader == member:
                    _value += min_value(member)[0]
                else:
                    # 중요한건 팀의 리더가 아니었다면 그냥 빼면 됨
                    if member in teams:
                        _value += min(min_value(member))
            leader_value = min(leader_value, _value)
        # 팀장이 희생하는 경우 -> 아래 팀은 리더나 멤버 아무거나 최소로 넣으면 됨
        member_value = get_value(leader)
        
        for member in sub_team_leaders:
            _value = min(min_value(member))
            member_value += _value
        print("계산 시작: 리더: ", leader)
        print("팀장이 나섰다면", member_value)
        print("만약 팀장이 나서지 않았으면 멤버중 하나가 선택되어야함", leader_value)
        
        cache[leader] = (member_value, leader_value)
        return cache[leader]

    return min(min_value(1))
```